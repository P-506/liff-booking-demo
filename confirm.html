<script>
  const API_URL = "https://script.google.com/macros/s/AKfycbw9Jg-z0bB6QMjdxXufLQx66CLuybPgcdPQWTs845MdfNnuA_4baUBsn214oCxywEA/exec";

  document.getElementById("confirmBtn").addEventListener("click", () => {
    // р╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕╡р╣Ир╣Ар╕ер╕╖р╕нр╕Бр╣Др╕зр╣Й
    const service_type = localStorage.getItem("service_type");
    const area = localStorage.getItem("area");
    const date = localStorage.getItem("date");
    const slot = localStorage.getItem("slot");

    // р╣Ар╕Хр╕гр╕╡р╕вр╕бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Бр╕Ър╕Ър╕Яр╕нр╕гр╣Мр╕б (р╣Др╕бр╣Ир╣Гр╕Кр╣И JSON)
    const formData = new URLSearchParams();
    formData.append("service_type", service_type);
    formData.append("area", area);
    formData.append("date", date);
    formData.append("slot", slot);

    // р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Др╕Ыр╕лр╕ер╕▒р╕Зр╕Ър╣Йр╕▓р╕Щ
    fetch(API_URL, {
      method: "POST",
      body: formData
    })
    .then(() => {
      alert("ЁЯОЙ р╕Ир╕нр╕Зр╕кр╕│р╣Ар╕гр╣Зр╕И");
      localStorage.clear();

      if (window.liff && liff.isInClient()) {
        liff.closeWindow();
      }
    })
    .catch(() => {
      alert("тЭМ р╕гр╕░р╕Ър╕Ър╕бр╕╡р╕Ыр╕▒р╕Нр╕лр╕▓ р╕ер╕нр╕Зр╣Гр╕лр╕бр╣Ир╕нр╕╡р╕Бр╕Др╕гр╕▒р╣Йр╕З");
    });
  });
</script>

</body>
</html>
