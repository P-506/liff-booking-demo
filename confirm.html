<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</title>

  <!-- LIFF SDK -->
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>

  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <header class="header">
    <h1>‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</h1>
    <div class="progress">
      <div class="progress-bar" style="width:100%"></div>
    </div>
  </header>

  <main class="content">
    <div class="summary-box">
      <div class="row">
        <span class="label">‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</span>
        <span class="value" id="service"></span>
      </div>
      <div class="row">
        <span class="label">‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà</span>
        <span class="value" id="area"></span>
      </div>
      <div class="row">
        <span class="label">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</span>
        <span class="value" id="date"></span>
      </div>
      <div class="row">
        <span class="label">‡πÄ‡∏ß‡∏•‡∏≤</span>
        <span class="value" id="slot"></span>
      </div>
    </div>
  </main>

  <footer class="footer">
    <button class="secondary" id="backBtn">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
    <button id="confirmBtn">‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</button>
  </footer>

<script>
  const LIFF_ID = "2008867980-fq1KwxaY";
  liff.init({ liffId: LIFF_ID });

  // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å localStorage
  const serviceType = localStorage.getItem("service_type");
  const area = localStorage.getItem("area");
  const date = localStorage.getItem("date");
  const slotLabel = localStorage.getItem("slot_label");

  // map ‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢
  const serviceMap = {
    one_time: "‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏£‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á",
    monthly: "‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô"
  };

  const areaMap = {
    bangkok: "‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û",
    metro: "‡∏õ‡∏£‡∏¥‡∏°‡∏ì‡∏ë‡∏•"
  };

  document.getElementById("service").textContent =
    serviceMap[serviceType] || "-";

  document.getElementById("area").textContent =
    areaMap[area] || "-";

  document.getElementById("date").textContent = date || "-";
  document.getElementById("slot").textContent = slotLabel || "-";

  // ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
  document.getElementById("backBtn").addEventListener("click", () => {
    history.back();
  });

  // ‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô (mock success)
  document.getElementById("confirmBtn").addEventListener("click", () => {
    // ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏¢‡∏¥‡∏á backend
    alert("üéâ ‡∏à‡∏≠‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!\n‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÉ‡∏´‡πâ‡∏ó‡∏≤‡∏á LINE");

    // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (optional)
    localStorage.clear();

    // ‡∏õ‡∏¥‡∏î LIFF
    if (liff.isInClient()) {
      liff.closeWindow();
    }
  });
</script>

</body>
</html>
